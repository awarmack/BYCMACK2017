getwd()
install.packages("RNetCDF")
?RNetCDF
??RNetCDF
setwd("~/Dropbox/Projects/Sailing/BYCMACK2017")
getwd()
list.files("~/")
list.files("C:/Users/Awarmack/Documents")
list.files("../~")
list.files("~/")
list.files("./~/")
list.files("../~/")
list.files("../")
list.files("../Dropbox")
setwd("../Dropbox/Projects/Sailing/BYCMACK2017")
list.files()
list.files("./dat")
filename <- list.files("./dat")[5]
filename
list.files("./dat")
filename <- list.files("./dat")[5]
dat <- open.nc(filename)
library(RNetCDF)
source('~/.active-rstudio-document')
getwd()
setwd("C:/users/Awarmack/Dropbox/Projects/Sailing/BYCMACK2017")
source('~/.active-rstudio-document')
list.files("./dat")[5]
dat <- open.nc(filename)
dat <- open.nc(paste0("./dat", filename))
paste0("./dat", filename)
dat <- open.nc(paste0("./dat/", filename))
summary(dat)
str(dat)
filename <-paste0("./dat/", list.files("./dat")[5])
filename
dat <- read.nc(filename)
dat <- open.nc(filename)
datrd <- read.nc(dat)
datrd <- read.nc(dat)
View(datrd$u)
summary(datrd)
View(datrd$time)
datrd
summary(datrd$u)
dim(datrd$u)
datrd$u[1]
datrd$u[1, 1, 1, 1]
datrd$u[1, 1, 100, 1]
datrd$u[1, 1, 1, 1]
dim(dard$u)
dim(datrd)
dim(datrd$u)
datrd$u[100,100]
datrd$u[100,100, 1, 1]
datrd$u[27,5, 1, 1]
datrd$u[27,5, 1, 2]
View(datrd$v)
source('C:/Users/AWarmack/Dropbox/projects/sailing/BYCMACK2017/src/readNMEA.R')
getwd
getwd()
source('C:/Users/AWarmack/Dropbox/projects/sailing/BYCMACK2017/src/readNMEA.R')
head(timest)
dat$nmea <- str_extract(dat$V1, "\\$.*")
head(dat$nmea)
write.csv(unique(date$nmea), "nmea.csv")
unique(dat$nmea)
as.data.frame(table(dat$nmea))
nmea_heads <- as.data.frame(table(dat$nmea))
nmea_heads
write.csv(nmea_heads, "./dat/nmea_heads")
View(dat[dat$nmea=="$WIMWV", ])
wind <- dat[dat$nmea =="$IIMWV", ]
View(wind)
str(wind)
dat$timest <- timest
wind <- dat[dat$nmea =="$IIMWV", ]
dat$timest <- timest
wind <- dat[dat$nmea =="$IIMWV", ]
str(wind)
library(dplyr)
library(tidyr)
wind <- wind %>% select(V2, V3, V4, V5)
str(wind)
wind <- dat[dat$nmea =="$IIMWV",]
str(wind)
wind <- wind %>% select(nmea, timest, V2, V3, V4, V5="units")
wind <- wind %>% select(nmea, timest, V2, V3, V4, V5)
wind
head(wind)
wind <- wind %>% select(nmea, timest, V2, V3, V4, V5) %>% rename(V2=DIR)
wind <- wind %>% select(nmea, timest, V2, V3, V4, V5) %>% rename(V2="DIR")
wind <- wind %>% select(nmea, timest, V2, V3, V4, V5) %>% rename("DIR"=V2)
str(wind)
table(wind$V3)
wind <- wind %>% select(nmea, timest, V2, V4) %>% rename("AWA"=V2, "AWS"=V4)
wind <- dat[dat$nmea =="$IIMWV",]
wind <- wind %>% select(nmea, timest, V2, V4) %>% rename("AWA"=V2, "AWS"=V4)
head(wind)
wind$AWA <- as.numeric(wind$AWA)
View(wind)
plot(wind$AWS)
wind$AWS <- as.numeric(wind$AWS)
plot(wind$AWS)
wind$AWS[wind$AWS > 100]
wind[wind$AWS > 100, ]
wind$AWS[wind$AWS > 100, ] <- NA
wind$AWS[wind$AWS > 100] <- NA  #set anything over 100 to NA
plot(wind$AWS)
plot(wind$AWS, windd$timest)
plot(wind$timest, wind$AWS)
library(ggplot2)
speed <- dat[dat$nmea =="$IIVHW", ]
str(speed)
STW <- dat[dat$nmea =="$IIVHW", ]
STW < - STW %>% select(nmea, timest, V6) %>% rename("STW" = V6)
STW <- dat[dat$nmea =="$IIVHW", ]
STW < - STW %>% select(nmea, timest, V6) %>% rename("STW"=V6)
STW <- STW %>% select(nmea, timest, V6) %>% rename("STW"=V6)
head(stw)
head(STW)
STW$STW <- as.numeric(STW$STW)
plot(STW$STW)
stw <- dat[dat$nmea =="$IIVHW", ]
stw <- stw %>% select(nmea, timest, V6) %>% rename("stw"=V6)
stw$stw <- as.numeric(stw$stw)
plot(stw$stw)
stw$stw[stw$stw > 13] <- NA
plot(stw$stw)
vlw <- dat[dat$nmea == "$IIVLW", ]
str(vlw)
vlw <- select(nmea, timest, V2) %>% rename("cum.miles"=V2)
vlw <- vlw %>% select(nmea, timest, V2) %>% rename("cum.miles"=V2)
head(vlw)
vlw$vlw <- as.numeric(vlw$vlw)
vlw <- dat[dat$nmea == "$IIVLW", ]
vlw <- vlw %>% select(nmea, timest, V2) %>% rename("cum.miles"=V2)
vlw$vlw <- as.numeric(vlw$cum.miles)
plot(vlw$cum.miles)
vlw <- dat[dat$nmea == "$IIVLW", ]
vlw <- vlw %>% select(nmea, timest, V2) %>% rename("cum.miles"=V2)
vlw$cum.miles <- as.numeric(vlw$cum.miles)
vlw <- dat[dat$nmea == "$IIVLW", ]
vlw <- vlw %>% select(nmea, timest, V2) %>% rename("cm.miles"=V2)
vlw$cm.miles <- as.numeric(vlw$cm.miles)
plot(vlw$cm.miles)
tail(vlw$cm.miles)
vlw$cm.miles[vlw$cm.miles > 5220.3] <- NA
plot(vlw$cm.miles)
head(vlw$cm.miles)
vlw$cm.miles[vlw$cm.miles < 5069] <- NA
plot(vlw$cm.miles)
autop <- dat[dat$nmea=="$GPAPB", ]
str(autop)
gpbod <- dat[dat$nmea=="$GPBOD",]
gpbod
str(gpbod)
head(gpbod)
gpbod <- gpbod %>%
select(nmea, timest, V2, V4, V6) %>%
rename("bear.true"=V2, "bear.mag"=V4, "waypt" = V6)
gpbod <- dat[dat$nmea=="$GPBOD",]
gpbod <- gpbod %>%
select(nmea, timest, V2, V4, V6) %>%
rename("bear.true"=V2, "bear.mag"=V4, "waypt" = V6) %>%
mutate(bear.true =as.numeric(bear.true),
bear.mag = as.numeric(bear.mag))
View(gpbod)
plot(gpbod$bear.true)
gpgga <- dat[gpgga$nmea=="$GPGGA", ]
gpgga <- dat[dat$nmea=="$GPGGA", ]
str(spgga)
str(gpgga)
gpgga <- dat[dat$nmea=="$GPGGA", ] %>%
select(nmea, timest, V2, V3, V4, V5, V6, V7, V8, V9, V10, V11, V12, V13) %>%
rename("time"=V2,
"lat"=V3,
"NS"=V4,
"lon"=V5,
"gps.qual"=V7,
"no.sat"=V8,
"prec"=V9,
"ant.alt"=V10,
"ant.alt.unit"=V11,
"geo.sep"=V12,
"geo.sep.unit"=V13)
str(gpgga)
coord <- gpgga$lat[1]
coord
substr(coord, 1, 1)
str_split(coord, "\d{2}")
str_split(coord, "\\d{2}")
str_split(coord, "\\d")
?str_split
coord
substr(coord, 1, 2)
deg <- as.numeric(substr(coord, 1, 2))
deg
substr(coord, 3, length(coord))
length(coord)
substr(coord, 3, nchar(coord))
deg <- as.numeric(substr(coord, 1, 2))
min <- substr(coord, 3, nchar(coord))
min <- as.numeric(min)
deg
min
min <- min/60
min
lat <- deg + min
lat
coord <- gpgga$lon[1]
coord
deg <- as.numeric(substr(coord, 1, 3))
min <- substr(coord, 4, nchar(coord))
min <- as.numeric(min)
min <- min/60
out <- deg + min
deg
deg <- as.numeric(substr(coord, 1, 3))
min <- substr(coord, 4, nchar(coord))
min <- as.numeric(min)
min <- min/60
out <- deg + min
out
source('C:/Users/AWarmack/Dropbox/projects/sailing/BYCMACK2017/src/functions.R')
sapply(gpgga$lat, convCoord)
gpgga$lat <- sapply(gpgga$lat, convCoord)
head(gpgga)
