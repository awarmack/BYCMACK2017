"0","library(akima)"
"0","library(dplyr)"
"0","#load Polars"
"0","polars <- read.csv(""../dat/polars/fullpolar.csv"")"
"0","#remove optimum points"
"0","opt <- polars[grep(""OPT"", polars$SAIL), ]"
"0","polars <- polars[-grep(""OPT"", polars$SAIL),  ]"
"0","#rejoin to the sail and heel data"
"0","pol <- left_join(pol, polars)"
"0","#pol.0 <- data.frame(VTW = 0, BTW = 32:180, V=0, VAW=0, BAW=0, VMG=0, PHI=0, SAIL=""Jib"")"
"0","#pol <- rbind(pol, pol.0)"
"0","# get the polar targets"
"0","pol.targets <- interpp(x=pol$VTW, "
"0","                       y=pol$BTW, "
"0","                       z=pol$V, "
"0","                       xo = perf$TWS, "
"0","                       yo= perf$TWA,"
"0","                       linear=FALSE,"
"0","                       extrap=FALSE,"
"0","                       duplicate = ""mean"")"
"0","#Calculate Measurables"
"0","perf$target.SOG <- pol.targets$z"
"0","perf$diff.SOG <- perf$SOG - perf$target.SOG"
"0","perf$pol.perc <- (perf$SOG / perf$target.SOG) * 100"
"0","targets <- expand.grid(TWS= seq(6, 35, by = 1), TWA=seq(30, 180, by=1))"
"0","targets$target.sog <- interpp(x=pol$VTW, "
"0","                              y=pol$BTW, "
"0","                              z=pol$V, "
"0","                        xo = targets$TWS, "
"0","                        yo= targets$TWA,"
"0","                        linear=TRUE,"
"0","                        extrap=FALSE,"
"0","                        duplicate = ""mean"")$z"
